(function(t){function e(e){for(var a,r,c=e[0],o=e[1],l=e[2],f=0,d=[];f<c.length;f++)r=c[f],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,c=1;c<s.length;c++){var o=s[c];0!==i[o]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},i={app:0},n=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return s(e)}function n(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=n,t.exports=i,i.id="4678"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"},on:{click:t.clickOnLayoutHandler}},[t.isAuth?s("Header"):t._e(),s("router-view"),t.isAuth?s("Footer"):t._e()],1)},n=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"page-header"},[s("div",{staticClass:"page-header__wrapper"},[s("p",{staticClass:"page-header__admin"},[t._v(" Администратор Бизнес Зала "),s("span",{staticClass:"page-header__place"},[t._v("«"+t._s(t.hallName)+"»")])]),s("OfflineIdicator"),s("Notifications"),s("button",{staticClass:"page-header__button button-alternate",attrs:{disabled:t.isCertificatesPage},on:{click:t.goToCertificates}},[t._v(" Реестр сертификатов ")]),s("button",{staticClass:"page-header__button button-alternate",on:{click:t.logout}},[t._v(" Выйти ")])],1)])},c=[],o=(s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isOffline?s("div",{staticClass:"connection-status"},[t._m(0),s("div",{staticClass:"connection-status__popup"},[s("div",{staticClass:"connection-status__window"},[s("h2",{staticClass:"connection-status__title",class:{"connection-status__title--wide":!t.tryToConnect}},[t._v(" "+t._s(t.tryToConnect?"Отсутствует интернет или связь с сервером":"Мы не смогли установить связь с сервером")+" ")]),t.tryToConnect?s("p",{staticClass:"connection-status__count"},[t._v(" Пытаемся установить соединение "),s("span",{staticClass:"connection-status__time"},[t._v(t._s(t.timeToCall))])]):t._e(),t.tryToConnect?t._e():s("p",{staticClass:"connection-status__text"},[t._v(" Для проверки статуса сертификата позвоните по указанному номеру телефона и назовите номер сертификата — мы активируем его вручную. ")]),t.tryToConnect?t._e():s("p",{staticClass:"connection-status__text"},[t._v(" После восстановления связи запись о гашении сертификата будет размещена в реестре автоматически. ")]),t.tryToConnect?t._e():s("div",{staticClass:"connection-status__phone"},[s("span",{staticClass:"connection-status__phone-number"},[t._v("+7 982 565 45 67")]),s("a",{staticClass:"button connection-status__phone-button",attrs:{href:"tel:+79825654567"}},[t._v("Позвонить")])])])])]):t._e()}),l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"connection-status__toggle-button"},[s("span",{staticClass:"visually-hidden"},[t._v("Соединение отсутствует")])])}],u={data:function(){return{isOffline:!1,timeToCall:30,intervalId:null}},mounted:function(){window.addEventListener("offline",this.setOffline),window.addEventListener("online",this.setOnline),this.intervalId=setInterval(this.decrementTimeToCall,1e3)},beforeDestroy:function(){window.removeEventListener("offline",this.setOffline),window.removeEventListener("online",this.setOnline),clearInterval(this.intervalId),this.timeToCall=30},methods:{setOnline:function(){this.timeToCall=30,this.isOffline=!1},setOffline:function(){this.timeToCall=30,this.isOffline=!0},decrementTimeToCall:function(){this.timeToCall>=0&&(this.timeToCall=this.timeToCall-1)}},computed:{tryToConnect:function(){return this.timeToCall>=0}}},f=u,d=(s("b350"),s("2877")),_=Object(d["a"])(f,o,l,!1,null,"9af58020",null),m=_.exports,p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"notifications",class:{"notifications--is-present":t.count,"notifications--list-shown":t.isShownNotesList},attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.toggleNotesList.apply(null,arguments)}}},[s("SvgIcon",{attrs:{name:"bell"}}),s("span",{staticClass:"notifications__count"},[t._v(t._s(t.count))]),t.isShownNotesList?s("NotesList"):t._e(),t.isNewNotes&&!t.isShownNotesList?s("NewNotes"):t._e()],1)},h=[],v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"notes-list",on:{click:function(t){t.stopPropagation()}}},[s("h3",{staticClass:"notes-list__title"},[t._v("Уведомления")]),s("button",{staticClass:"notes-list__clear",on:{click:t.clearNotes}},[t._v(" Очистить уведомления ")]),s("div",{staticClass:"notes-list__wrapper"},[s("ul",{staticClass:"notes-list__list"},t._l(t.notes,(function(t,e){return s("li",{key:e},[s("Note",{attrs:{note:t}})],1)})),0)])])},g=[],b={computed:{notes:function(){return this.$store.getters["getAllNotes"]}},methods:{clearNotes:function(){this.$store.dispatch("clearAllNotes")}}},C=b,w=Object(d["a"])(C,v,g,!1,null,null,null),j=w.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"notifications__new-list",on:{click:function(t){t.stopPropagation()}}},t._l(t.newNotes,(function(t,e){return s("li",{key:t.id},[s("Note",{staticClass:"note--new",style:"animation-delay: "+100*(e+1)+"ms",attrs:{note:t}})],1)})),0)},k=[],x={mounted:function(){this.$eventBus.$on("click-on-layout",this.clearNewEvents)},computed:{newNotes:function(){return this.$store.getters["getNewNotes"]?this.$store.getters["getNewNotes"]:[]}},methods:{clearNewEvents:function(){this.$store.dispatch("clearNewNotes")}}},N=x,$=Object(d["a"])(N,y,k,!1,null,null,null),T=$.exports,O={data:function(){return{isShownNotesList:!1}},components:{NotesList:j,NewNotes:T},mounted:function(){this.$eventBus.$on("click-on-layout",this.hideNotesList)},computed:{count:function(){var t=this.$store.getters["getAllNotes"].length;return t<1?"":t>99?"99+":t},isNewNotes:function(){return this.$store.getters["getNewNotes"]&&this.$store.getters["getNewNotes"].length>0}},methods:{toggleNotesList:function(){this.$store.dispatch("clearNewNotes"),this.isShownNotesList=!this.isShownNotesList},hideNotesList:function(){this.$store.dispatch("clearNewNotes"),this.isShownNotesList=!1}}},S=O,E=Object(d["a"])(S,p,h,!1,null,null,null),D=E.exports,P={components:{OfflineIdicator:m,Notifications:D},computed:{isCertificatesPage:function(){return"Certificates"===this.$route.name},hallName:function(){return this.$store.getters["getHallName"]}},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push({name:"Auth"})}))},goToCertificates:function(){this.$router.push({name:"Certificates"})},changestatus:function(){this.$axios.post("/certificates-change-status",{id:9,status:"inactive"})}}},I=P,L=Object(d["a"])(I,r,c,!1,null,null,null),q=L.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("footer",{staticClass:"page-footer"},[t._m(0),s("a",{staticClass:"page-footer__link page-footer__link--phone",attrs:{href:"tel:+88001234567"}},[s("SvgIcon",{attrs:{name:"phone",width:"25",height:"25",className:"page-footer__link-icon"}}),s("span",{staticClass:"page-footer__link-description"},[t._v("Служба поддержки")]),s("span",{staticClass:"page-footer__link-info"},[t._v("8 800 123 45 67")])],1)])},R=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"page-footer__link page-footer__link--bank",attrs:{href:"#"}},[s("img",{attrs:{src:"img/bank.png",alt:"Банк Тинькофф, логотип",width:"68",height:"21"}})])}],z={},B=z,H=Object(d["a"])(B,A,R,!1,null,null,null),F=H.exports,M={components:{Header:q,Footer:F},computed:{isAuth:function(){return this.$store.getters["authenticated"]&&this.$store.getters["token"]}},methods:{clickOnLayoutHandler:function(){this.$eventBus.$emit("click-on-layout")}}},G=M,V=Object(d["a"])(G,i,n,!1,null,null,null),Q=V.exports,U=s("5530"),X=s("8c4f"),J=s("2f62"),K=s("0e44"),W=s("1da1"),Y=(s("96cf"),s("bc3a")),Z=s.n(Y),tt={code:null,message:"",status:"",certificate:{},user:{}},et={state:function(){return tt},mutations:{mutateOnSuccess:function(t,e){t.status=e.status,t.message=e.message,t.certificate=e.certificate,t.user=e.user,a["default"].prototype.$eventBus.$emit("certificate-scanned")},mutateOnError:function(t,e){t.certificate={},t.user={},t.status=e.status,t.code=e.code,t.message=e.message,a["default"].prototype.$eventBus.$emit("certificate-scanned")},clearStore:function(t){t.certificate={},t.user={},t.status="",t.code=null,t.message=""}},actions:{sendCode:function(t,e){return Object(W["a"])(regeneratorRuntime.mark((function s(){var a,i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.commit,i=t.dispatch,s.next=3,Z.a.post("certificates-check",e);case 3:n=s.sent,"success"===n.data.status?(a("mutateOnSuccess",n.data),i("fetchHallData")):a("mutateOnError",n.data);case 5:case"end":return s.stop()}}),s)})))()}},getters:{getCertificate:function(t){return t.certificate},getCertificateUser:function(t){return t.user},getCertificateMessage:function(t){return t.message},getCertificateStatus:function(t){return t.status},getCertificateCode:function(t){return t.code}}},st={authenticated:!1,token:null,error:null,hallId:null},at={state:function(){return st},mutations:{setAuth:function(t,e){t.authenticated=e.authenticated,t.token=e.token,t.hallId=e.hall_id},setError:function(t,e){t.error=e.error},removeError:function(t){t.error=null},logout:function(t){t.authenticated=!1,t.token="",t.hallId=null}},actions:{authenticate:function(t,e){return Object(W["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=t.commit,s.prev=1,s.next=4,Z.a.post("/login",{email:e.email,password:e.password});case 4:i=s.sent,"error"===i.data.status?a("setError",{error:i.data}):(a("setAuth",{authenticated:!0,token:"Bearer "+i.data.token}),Z.a.defaults.headers.common["authorization"]="Bearer "+i.data.token),s.next=11;break;case 8:s.prev=8,s.t0=s["catch"](1),a("setError",{error:s.t0.response.data});case 11:case"end":return s.stop()}}),s,null,[[1,8]])})))()},logout:function(t){return Object(W["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.prev=1,e.next=4,Z.a.post("logout");case 4:a=e.sent,200===a.status&&(s("logout"),Z.a.defaults.headers.common["authorization"]=""),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()}},getters:{authenticated:function(t){return t.authenticated},error:function(t){return t.error},token:function(t){return t.token}}},it=(s("4de4"),{notes:[],newNotes:[]}),nt={state:function(){return it},mutations:{setNotes:function(t,e){t.notes=e.notes},setNewNotes:function(t,e){t.newNotes=e.notes},removeNewNote:function(t,e){t.newNotes=t.newNotes.filter((function(t){return t.id!==e.note.id}))}},actions:{fetchNotes:function(t){var e=t.commit,s=[{id:Math.random()},{id:Math.random(),type:"bank"},{id:Math.random()}];e("setNewNotes",{notes:s}),e("setNotes",{notes:s})},clearNewNotes:function(t){var e=t.commit,s=[];e("setNewNotes",{notes:s})},clearAllNotes:function(t){var e=t.commit,s=[];e("setNewNotes",{notes:s}),e("setNotes",{notes:s})}},getters:{getAllNotes:function(t){return t.notes},getNewNotes:function(t){return t.newNotes}}},rt={data:null},ct={state:function(){return rt},mutations:{setHallData:function(t,e){t.data=e.data}},actions:{fetchHallData:function(t){return Object(W["a"])(regeneratorRuntime.mark((function e(){var s,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.prev=1,e.next=4,a["default"].prototype.$axios.get("/hall");case 4:i=e.sent,n=i.data.data,s("setHallData",{data:n}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),401===e.t0.response.status&&s("logout");case 12:a["default"].prototype.$echo.private("orders.new.".concat(i.data.data.user_id)).listen("OrderUpdateEvent",(function(t){console.log(t)}));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},sendExpiredCertificate:function(t,e){return Object(W["a"])(regeneratorRuntime.mark((function s(){var i,n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.commit,s.prev=1,s.next=4,a["default"].prototype.$axios.post("/certificates-expired",{id:e.id});case 4:n=s.sent,r=n.data.hall,i("setHallData",{data:r}),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](1),console.error(s.t0);case 12:case"end":return s.stop()}}),s,null,[[1,9]])})))()},removeCertificate:function(t,e){return Object(W["a"])(regeneratorRuntime.mark((function s(){var i,n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=t.commit,s.next=3,a["default"].prototype.$axios.post("/certificates-remove",{id:e.id});case 3:n=s.sent,r=n.data.hall,i("setHallData",{data:r});case 6:case"end":return s.stop()}}),s)})))()}},getters:{getHallData:function(t){return t.data},getHallName:function(t){return t.data&&t.data.name?t.data.name:""},getHallCertificates:function(t){return t.data&&t.data.certificates?t.data.certificates:[]}}},ot={data:null,hall:null,totalCertificates:0,totalVisits:0},lt={state:function(){return ot},mutations:{setRegistryData:function(t,e){t.data=e.data,t.hall=e.hall,t.totalCertificates=e.data.hall.certificates_count,t.totalVisits=e.data.hall.certificates_sum_pass_limit}},actions:{fetchRegistryData:function(t){return Object(W["a"])(regeneratorRuntime.mark((function e(){var s,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,e.prev=1,e.next=4,a["default"].prototype.$axios.get("/hall/certificates");case 4:i=e.sent,n=i.data.data,s("setRegistryData",{data:n}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),401===e.t0.response.status&&s("logout");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()}},getters:{getRegistryData:function(t){return t.data},getRegistryName:function(t){return t.data&&t.data.name?t.data.name:""},getRegistryCertificates:function(t){return t.data&&t.data.certificates?t.data.certificates:[]},getTotalCertificates:function(t){return t.totalCertificates},getTotalVisits:function(t){return t.totalVisits}}};a["default"].use(J["a"]);var ut=new J["a"].Store({modules:{certificateStore:et,authStore:at,notifications:nt,hall:ct,registry:lt},plugins:[Object(K["a"])({paths:["authStore.authenticated","authStore.token","authStore.hallId"]})]}),ft=function(t){var e=t.next,s=t.store;return s.getters.authenticated?e():e({name:"Auth"})},dt=function(t){var e=t.next,s=t.store,a=t.app;return s.getters.authenticated&&s.getters.token?(a.prototype.$axios.defaults.headers.common["authorization"]=s.getters.token,e({name:"Home"})):e()},_t=function(t){var e=t.next,s=t.store;return s.getters["getHallData"]||s.dispatch("fetchHallData"),e()};function mt(t,e,s){var a=e[s];return a?function(){var i=mt(t,e,s+1);a(Object(U["a"])(Object(U["a"])({},t),{},{next:i}))}:t.next}var pt=mt,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"page-main"},[s("div",{staticClass:"page-main__wrapper"},[s("section",{staticClass:"page-main__section"},[s("h2",{staticClass:"page-main__title"},[t._v("Подтвердите сертификат")]),s("QrScanner"),s("Certificate")],1),s("section",{staticClass:"page-main__section"},[s("h2",{staticClass:"page-main__title"},[t._v("Список гостей")]),s("GuestsList")],1)])])},vt=[],gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"qr-scanner",attrs:{action:"#",method:"post",autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[s("div",{staticClass:"qr-scanner__input-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.qr,expression:"qr"}],ref:"input",staticClass:"qr-scanner__input",class:{"qr-scanner__input--applied":t.isCodeApplied,"qr-scanner__input--declined":t.isCodeDeclined},attrs:{type:"text",name:"qr-code",id:"qr-code",placeholder:"Введите номер сертификата или отсканируйте QR код сканером",required:""},domProps:{value:t.qr},on:{input:function(e){e.target.composing||(t.qr=e.target.value)}}}),s("label",{staticClass:"qr-scanner__placeholder",attrs:{for:"qr-code"}},[t._v("Введите номер сертификата или отсканируйте QR код сканером")])]),s("p",{staticClass:"qr-scanner__message"},[s("SvgIcon",{attrs:{name:"info","class-name":"qr-scanner__message-icon",width:"17",height:"17"}}),t._v(" Для посещения Бизнес-зала билет не требуется ")],1),s("button",{staticClass:"qr-scanner__submit button",attrs:{type:"submit"}},[t._v("Проверить")])])},bt=[],Ct={data:function(){return{qr:""}},beforeMount:function(){this.$eventBus.$on("clear-qr",this.clearQr)},mounted:function(){this.$refs.input.focus()},beforeDestroy:function(){this.$eventBus.$off("clear-qr",this.clearQr)},methods:{submit:function(){this.$store.dispatch("sendCode",{code:this.qr})},clearQr:function(){this.qr=""}},computed:{isCodeDeclined:function(){return"error"===this.$store.getters["getCertificateStatus"]},isCodeApplied:function(){return"success"===this.$store.getters["getCertificateStatus"]}}},wt=Ct,jt=Object(d["a"])(wt,gt,bt,!1,null,null,null),yt=jt.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"certificate",class:{"certificate--empty":!t.status}},[t.status?t._e():s("p",{staticClass:"certificate__empty"},[t._v(" Сертификат еще не просканирован ")]),t.isNotExist?s("div",{staticClass:"certificate__wrapper certificate__wrapper--error"},[s("h2",{staticClass:"certificate__title certificate__title--mba"},[s("SvgIcon",{attrs:{className:"certificate__icon",name:"red-face",width:"30",height:"30"}}),t._v(t._s(t.title)+" ")],1),s("div",{staticClass:"certificate__controls"},[s("p",{staticClass:"certificate__message certificate__message--absolute",class:{" certificate__message--error":t.description<1}},[t._v(" "+t._s("Вход в бизнес зал запрещен.")+" ")]),s("button",{key:t.timeToClear,staticClass:"certificate__close-button button button--attention",on:{click:t.clearCertificate}},[t._v(" Закрыть ("+t._s(t.timeToClear)+") ")])])]):t._e(),t.hasBeenActivated?s("div",{staticClass:"certificate__wrapper certificate__wrapper--error"},[s("h2",{staticClass:"certificate__title certificate__title--mba"},[s("SvgIcon",{attrs:{className:"certificate__icon",name:"red-face",width:"30",height:"30"}}),t._v(t._s(t.title)+" ")],1),s("div",{staticClass:"certificate__controls"},[s("p",{staticClass:"certificate__message",class:{" certificate__message--error":t.isMessageError}},[t._v(" "+t._s("Вход в бизнес зал запрещен.")+" ")]),s("button",{key:t.timeToClear,staticClass:"certificate__close-button button button--attention",on:{click:t.clearCertificate}},[t._v(" Закрыть ("+t._s(t.timeToClear)+") ")])])]):t._e(),"success"===t.status?s("div",{staticClass:"certificate__wrapper certificate__wrapper--success"},[s("h2",{staticClass:"certificate__title"},[s("SvgIcon",{attrs:{className:"certificate__icon",name:"green-face",width:"30",height:"30"}}),t._v(t._s(t.title)+" ")],1),s("dl",{staticClass:"certificate__paragraph certificate__paragraph--before-text"},[s("dt",{staticClass:"certificate__term"},[t._v(t._s(t.term))]),s("dd",{staticClass:"certificate__description certificate__description--plain"},[t._v(" "+t._s(t.certificate.pass_limit)+" ")])]),s("p",{staticClass:"certificate__text"},[t._v(" Посещение Бизнес-зала разрешено. Для посещения Бизнес-зала билет не требуется. ")]),s("div",{staticClass:"certificate__controls"},[s("TimerToggler",{attrs:{timer:t.timer,"toggle-timer":t.toggleTimer}}),s("button",{key:t.timeToClear,staticClass:"certificate__close-button button button--accept",on:{click:t.clearCertificate}},[t._v(" Закрыть ("+t._s(t.timeToClear)+") ")])],1)]):t._e()])},xt=[],Nt=(s("a9e3"),s("a4d3"),s("e01a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"certificate__label",class:{"certificate__label--active":t.timer,"guest__timer-toggler":t.isGuest},attrs:{for:"timer-checkbox"}},[t._v("Таймер "),s("input",{attrs:{type:"checkbox",name:"timer",id:"timer-checkbox"},domProps:{checked:t.timer},on:{change:t.toggleTimer}})])}),$t=[],Tt={props:{isGuest:{type:Boolean,default:!0},timer:{type:Boolean,default:!0},toggleTimer:{type:Function,default:function(){}}}},Ot=Tt,St=Object(d["a"])(Ot,Nt,$t,!1,null,null,null),Et=St.exports,Dt={components:{TimerToggler:Et},data:function(){return{term:"Количество гостей:",description:0,message:"Посещение Бизнес-зала разрешено. Для посещения Бизнес-зала билет не требуется.",timeToClear:5,intervalIndex:null,timer:!0}},mounted:function(){var t=this;this.$eventBus.$on("certificate-scanned",(function(){t.intervalIndex=setInterval(t.decrementTimeToCLear,1e3)}))},beforeDestroy:function(){this.intervalIndex&&(clearInterval(this.intervalIndex),this.timeToClear=5)},computed:{hasBeenActivated:function(){return"error"===this.status.toLowerCase()&&1003===Number(this.code)},isNotExist:function(){return"error"===this.status.toLowerCase()&&1001===Number(this.code)},certificate:function(){return this.$store.getters["getCertificate"]},isMessageError:function(){return!this.isDescriptionError&&this.description<1},isDescriptionError:function(){return"number"!==typeof this.description},code:function(){return this.$store.getters["getCertificateCode"]},status:function(){return this.$store.getters["getCertificateStatus"]},title:function(){return this.$store.getters["getCertificateMessage"]}},methods:{decrementTimeToCLear:function(){this.timeToClear>0?this.timeToClear=this.timeToClear-1:this.clearCertificate()},toggleTimer:function(){var t=this;this.timer=!1,this.$store.dispatch("removeCertificate",{id:this.certificate.id}).catch((function(){t.timer=!0}))},getDescription:function(t){return t<100?t:"99+"},clearCertificate:function(){this.$store.commit("clearStore"),this.$eventBus.$emit("clear-qr"),clearInterval(this.intervalIndex),this.timeToClear=5}}},Pt=Dt,It=Object(d["a"])(Pt,kt,xt,!1,null,null,null),Lt=It.exports,qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"guests"},[t.isEpty?t._e():s("div",{staticClass:"guests__header"},[s("span",{staticClass:"guests__header-cell guests__header-cell--number"},[t._v("№ п.п.")]),s("span",{staticClass:"guests__header-cell guests__header-cell--table"},[t._v("№ столика")]),s("span",{staticClass:"guests__header-cell guests__header-cell--guests-count"},[t._v("Кол-во гостей")]),s("span",{staticClass:"guests__header-cell guests__header-cell--timer"},[t._v("Таймер")])]),s("div",{staticClass:"guests__list-wrapper"},[s("ul",{staticClass:"guests__list",class:{"guests__list--empty":t.isEpty}},[t.isEpty?s("li",{staticClass:"guests__item guest__item--empty"},[t._v(" В вашем зале пока нет гостей ")]):t._l(t.guests,(function(t){return s("li",{key:t.id,staticClass:"guests__item"},[s("Guest",{attrs:{data:t}})],1)}))],2)])])},At=[],Rt={computed:{isEpty:function(){return this.guests.length<1},guests:function(){return this.$store.getters["getHallCertificates"]}}},zt=Rt,Bt=Object(d["a"])(zt,qt,At,!1,null,null,null),Ht=Bt.exports,Ft={name:"Home",components:{QrScanner:yt,Certificate:Lt,GuestsList:Ht}},Mt=Ft,Gt=Object(d["a"])(Mt,ht,vt,!1,null,null,null),Vt=Gt.exports,Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"page-main"},[s("router-link",{staticClass:"logo",attrs:{to:"/"}},[s("img",{attrs:{src:"img/logo.png",alt:"Golden Key logo",width:"200",height:"50"}})]),s("AuthForm")],1)},Ut=[],Xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"auth-form",attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[s("h1",{staticClass:"auth-form__title"},[t._v("Добро пожаловать")]),s("legend",{staticClass:"auth-form__legend"},[t._v(" Чтобы войти, введите логин и пароль ")]),s("label",{staticClass:"auth-form__label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"auth-form__input",class:{"auth-form__input--invalid":t.error},attrs:{type:"text",name:"login",id:"login",placeholder:"Введите логин",required:""},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),s("label",{staticClass:"auth-form__label"},["checkbox"===(t.isPassShown?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"auth-form__input",class:{"auth-form__input--invalid":t.error},attrs:{name:"password",id:"password",placeholder:"Введите пароль",required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{change:function(e){var s=t.password,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=t._i(s,n);a.checked?r<0&&(t.password=s.concat([n])):r>-1&&(t.password=s.slice(0,r).concat(s.slice(r+1)))}else t.password=i}}}):"radio"===(t.isPassShown?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"auth-form__input",class:{"auth-form__input--invalid":t.error},attrs:{name:"password",id:"password",placeholder:"Введите пароль",required:"",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{change:function(e){t.password=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"auth-form__input",class:{"auth-form__input--invalid":t.error},attrs:{name:"password",id:"password",placeholder:"Введите пароль",required:"",type:t.isPassShown?"text":"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),s("button",{staticClass:"auth-form__show-password",attrs:{type:"button"},on:{click:t.togglePass}},[s("span",{staticClass:"visually-hidden"},[t._v("Показать пароль")]),s("SvgIcon",{attrs:{name:t.isPassShown?"close":"open",className:"auth-form__icon"}})],1),s("button",{staticClass:"auth-form__forgot-password",attrs:{type:"button"}},[t._v(" Забыли пароль? ")]),t.error?s("p",{staticClass:"auth-form__error-text"},[t._v(t._s(t.error.message))]):t._e()]),s("button",{staticClass:"auth-form__submit button",attrs:{type:"submit"},on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[t._v(" Войти ")])])},Jt=[],Kt=s("b85c"),Wt=(s("d3b7"),s("ddb0"),{data:function(){return{login:"",password:"",isPassShown:!1}},computed:{error:function(){return this.$store.getters["error"]}},methods:{togglePass:function(){this.isPassShown=!this.isPassShown},submitForm:function(t){var e,s=this,a=new FormData(t.target),i=Object(Kt["a"])(a.entries());try{for(i.s();!(e=i.n()).done;){var n=e.value;console.log(n)}}catch(r){i.e(r)}finally{i.f()}this.$store.dispatch("authenticate",{email:this.login,password:this.password}).then((function(){return s.$router.push({name:"Home"})}),(function(t){console.log(t)}))}}}),Yt=Wt,Zt=Object(d["a"])(Yt,Xt,Jt,!1,null,null,null),te=Zt.exports,ee={name:"Auth",components:{AuthForm:te}},se=ee,ae=Object(d["a"])(se,Qt,Ut,!1,null,null,null),ie=ae.exports,ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"page-main"},[s("div",{staticClass:"page-main__wrapper"},[s("section",{staticClass:"page-main__section page-main__section--mw100"},[s("div",{staticClass:"page-main__flex-row"},[s("button",{staticClass:"page-main__back-button button-alternate",on:{click:t.toMain}},[s("SvgIcon",{attrs:{name:"arrow",className:"page-main__icon-arrow"}}),t._v(" Назад на главную ")],1),s("h1",{staticClass:"page-main__title page-main__title--m0"},[t._v(" Реестр сертификатов ")]),s("p",{staticClass:"page-main__hall"},[t._v(" Бизнес Зал «"+t._s(t.hallName)+"»"),s("span",{staticClass:"page-main__hall-code"},[t._v("Код Бизнес-зала: 125468786")])])]),s("dl",{staticClass:"amount-list"},[s("div",{staticClass:"amount-list__item"},[s("dt",{staticClass:"amount-list__term"},[t._v("Количество сертификатов")]),s("dd",{staticClass:"amount-list__description"},[t._v(t._s(t.totalCertificates))])]),s("div",{staticClass:"amount-list__item"},[s("dt",{staticClass:"amount-list__term"},[t._v("Количество посещений")]),s("dd",{staticClass:"amount-list__description"},[t._v(t._s(t.totalVisits))])])]),s("div",{staticClass:"page-main__flex-row"},[s("h2",{staticClass:"page-main__title"},[t._v("Сертификаты")]),s("ul",{staticClass:"buttons-list"},[s("li",{staticClass:"buttons-list__item"},[s("button",{staticClass:"buttons-list__button"},[s("SvgIcon",{attrs:{name:"download",width:"16",height:"16"}}),t._v("Сохранить ")],1)]),s("li",{staticClass:"buttons-list__item"},[s("button",{staticClass:"buttons-list__button"},[s("SvgIcon",{attrs:{name:"send",width:"16",height:"16"}}),t._v("Отправить ")],1)]),s("li",{staticClass:"buttons-list__item"},[s("button",{staticClass:"buttons-list__button"},[s("SvgIcon",{attrs:{name:"xlsx",width:"16",height:"16"}}),t._v("Печатать (.xlsx) ")],1)])])]),s("Filters"),s("CertificatesList")],1)])])},re=[],ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"filters"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"filters__search",attrs:{type:"text",name:"search",placeholder:"Поиск по коду сертификата, коду бизнес зала, названию бизнес зала"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),s("div",{staticClass:"filters__controls"},[s("h3",{staticClass:"filters__subtitle"},[t._v("Период")]),s("ul",{staticClass:"filters__list"},[s("li",{staticClass:"filters__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.periods,expression:"periods"}],attrs:{type:"radio",name:"period",id:"yesterday-filter",value:"yesterday-filter",checked:""},domProps:{checked:t._q(t.periods,"yesterday-filter")},on:{change:function(e){t.periods="yesterday-filter"}}}),s("label",{staticClass:"filters__label",attrs:{for:"yesterday-filter"}},[t._v("Вчера")])]),s("li",{staticClass:"filters__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.periods,expression:"periods"}],attrs:{type:"radio",name:"period",id:"today-filter",value:"today-filter"},domProps:{checked:t._q(t.periods,"today-filter")},on:{change:function(e){t.periods="today-filter"}}}),s("label",{staticClass:"filters__label",attrs:{for:"today-filter"}},[t._v("Сегодня")])]),s("li",{staticClass:"filters__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.periods,expression:"periods"}],attrs:{type:"radio",name:"period",id:"month-filter",value:"month-filter"},domProps:{checked:t._q(t.periods,"month-filter")},on:{change:function(e){t.periods="month-filter"}}}),s("label",{staticClass:"filters__label",attrs:{for:"month-filter"}},[t._v("Месяц")])]),s("li",{staticClass:"filters__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.periods,expression:"periods"}],attrs:{type:"radio",name:"period",id:"year-filter",value:"year-filter"},domProps:{checked:t._q(t.periods,"year-filter")},on:{change:function(e){t.periods="year-filter"}}}),s("label",{staticClass:"filters__label",attrs:{for:"year-filter"}},[t._v("Год")])]),s("li",{staticClass:"filters__item"},[t._v(" от "),s("DatePicker",{staticClass:"filters__date-picker",attrs:{mode:"date"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.inputValue,i=e.inputEvents;return[s("input",t._g({staticClass:"filters__date-input",attrs:{placeholder:"дд.мм.гггг"},domProps:{value:a}},i))]}}]),model:{value:t.timeFrom,callback:function(e){t.timeFrom=e},expression:"timeFrom"}})],1),s("li",{staticClass:"filters__item"},[t._v(" до "),s("DatePicker",{staticClass:"filters__date-picker",attrs:{mode:"date"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.inputValue,i=e.inputEvents;return[s("input",t._g({staticClass:"filters__date-input",attrs:{placeholder:"дд.мм.гггг"},domProps:{value:a}},i))]}}]),model:{value:t.timeTo,callback:function(e){t.timeTo=e},expression:"timeTo"}})],1)])]),t._m(0)])},oe=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"filters__controls"},[s("h3",{staticClass:"filters__subtitle"},[t._v("Статус")]),s("ul",{staticClass:"filters__list"},[s("li",{staticClass:"filters__item"},[s("input",{attrs:{type:"radio",name:"status",id:"all-filter",checked:""}}),s("label",{staticClass:"filters__label",attrs:{for:"all-filter"}},[t._v("Все")])]),s("li",{staticClass:"filters__item"},[s("input",{attrs:{type:"radio",name:"status",id:"active-filter"}}),s("label",{staticClass:"filters__label",attrs:{for:"active-filter"}},[t._v("Активированные")])]),s("li",{staticClass:"filters__item"},[s("input",{attrs:{type:"radio",name:"status",id:"decline-filter"}}),s("label",{staticClass:"filters__label",attrs:{for:"decline-filter"}},[t._v("Отказ")])])])])}],le={data:function(){return{timeFrom:null,timeTo:null,period:null,status:null,periods:"yesterday-filter",search:""}},watch:{timeFrom:function(t){(t||this.timeFrom||this.timeTo)&&(this.periods="")},timeTo:function(t){(t||this.timeFrom||this.timeTo)&&(this.periods="")},periods:function(t){t&&(this.timeFrom=null,this.timeTo=null)}},methods:{setPeriod:function(t){console.log(t)}}},ue=le,fe=Object(d["a"])(ue,ce,oe,!1,null,null,null),de=fe.exports,_e=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"certificates-list"},[s("div",{staticClass:"certificates-list__table"},[t._m(0),s("ul",{staticClass:"certificates-list__list"},[t._l(t.certificates.data,(function(e){return s("li",{key:e.id,staticClass:"certificates-list__item"},[s("p",{staticClass:"certificates-list__cell certificates-list__cell--hall-code"},[t._v(" "+t._s(e.hall_id?e.hall_id:"")+" ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--hall-name"},[t._v(" "+t._s(t.hallData.hall.name)+" ")]),s("p",{staticClass:"\n            certificates-list__cell certificates-list__cell--certificate-code\n          "},[t._v(" "+t._s(e.id?e.id:"")+" ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--name"},[t._v(" "+t._s(e.user&&e.user.name?e.user.name:"")+" ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--date"},[t._v(" "+t._s(e.start_time?t.$moment(e.start_time).format("DD.MM.yyyy"):"")+" ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--time"},[t._v(" "+t._s(e.start_time?t.$moment(e.start_time).format("HH:mm"):"")+" ")]),s("p",{staticClass:"\n            certificates-list__cell\n            certificates-list__cell--status\n            certificates-list__cell--success\n          "},[t._v(" Активирован ")])])})),t._m(1),t._m(2)],2),s("div",{staticClass:"certificates-list__controls"},[s("button",{staticClass:"certificates-list__button button"},[t._v("Загрузить еще")]),s("Pagination",{attrs:{data:t.hallData.certificates,"data-callback":t.paginate}})],1)])])},me=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"certificates-list__head"},[s("p",{staticClass:"\n          certificates-list__head-title\n          certificates-list__head-title--hall-code\n        "},[t._v(" Код "),s("br"),t._v(" Бизнес-зала ")]),s("p",{staticClass:"\n          certificates-list__head-title\n          certificates-list__head-title--hall-name\n        "},[t._v(" Наименование Бизнес-зала ")]),s("p",{staticClass:"\n          certificates-list__head-title\n          certificates-list__head-title--certificate-code\n        "},[t._v(" Код сертификата ")]),s("p",{staticClass:"\n          certificates-list__head-title certificates-list__head-title--name\n        "},[t._v(" ФИО ")]),s("p",{staticClass:"\n          certificates-list__head-title certificates-list__head-title--date\n        "},[t._v(" Дата ")]),s("p",{staticClass:"\n          certificates-list__head-title certificates-list__head-title--time\n        "},[t._v(" Время ")]),s("p",{staticClass:"\n          certificates-list__head-title\n          certificates-list__head-title--status\n          certificates-list__head-title--error\n          certificates-list__head-title--success\n        "},[t._v(" Статус сертификата ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"certificates-list__item"},[s("p",{staticClass:"certificates-list__cell certificates-list__cell--hall-code"},[t._v(" 125468786 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--hall-name"},[t._v(" Ленинградский ")]),s("p",{staticClass:"\n            certificates-list__cell certificates-list__cell--certificate-code\n          "},[t._v(" 45456548 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--name"},[t._v(" Березовский Дмитрий Анатольевич +99 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--date"},[t._v(" 16.04.2020 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--time"},[t._v(" 14:29 ")]),s("p",{staticClass:"\n            certificates-list__cell\n            certificates-list__cell--status\n            certificates-list__cell--error\n          "},[t._v(" Отказ ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"certificates-list__item"},[s("p",{staticClass:"certificates-list__cell certificates-list__cell--hall-code"},[t._v(" 125468786 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--hall-name"},[t._v(" Ленинградский ")]),s("p",{staticClass:"\n            certificates-list__cell certificates-list__cell--certificate-code\n          "},[t._v(" 45456548 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--name"},[t._v(" Березовский Дмитрий Анатольевич +99 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--date"},[t._v(" 16.04.2020 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--time"},[t._v(" 14:29 ")]),s("p",{staticClass:"certificates-list__cell certificates-list__cell--status"},[t._v(" Активирован ")])])}],pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"pagination"},[t.data.prev_page_url?s("a",{staticClass:"pagination__prev-btn",attrs:{href:t.data.prev_page_url},on:{click:function(e){return e.preventDefault(),t.getPageData(t.data.prev_page_url)}}},[t._v("Назад")]):t._e(),s("ul",{staticClass:"pagination__list"},t._l(t.getPagination,(function(e,a){return s("li",{key:a,staticClass:"pagination__item",class:{"pagination__item--current":e.active,"pagination__item--dots":!e.url}},[s("a",{staticClass:"pagination__link",attrs:{href:e.url,"data-page":e},on:{click:function(s){return s.preventDefault(),t.getPageData(e.url)}}},[t._v(t._s(e.label))])])})),0),t.data.next_page_url?s("a",{staticClass:"pagination__more-btn",attrs:{href:t.data.next_page_url},on:{click:function(e){return e.preventDefault(),t.getPageData(t.data.next_page_url)}}},[t._v("Вперед")]):t._e()])},he=[],ve=s("2909"),ge=[{},{active:!0,label:"1",url:"12312312"},{active:!1,label:"2",url:"12312312"},{}],be={data:function(){return{}},props:{data:{type:Object,default:function(){return{links:ge,next_page_url:"123123123",prev_page_url:"123123123"}}},dataCallback:{type:Function,default:function(){}}},computed:{getPagination:function(){var t=[];return this.data.links&&(t=Object(ve["a"])(this.data.links),t.shift(),t.pop()),t}},methods:{getPageData:function(t){var e=this;this.$axios.get(t).then((function(t){e.dataCallback(t.data)}))}}},Ce=be,we=Object(d["a"])(Ce,pe,he,!1,null,null,null),je=we.exports,ye={components:{Pagination:je},computed:{certificates:function(){return this.$store.getters["getRegistryCertificates"]},hallData:function(){return this.$store.getters["getRegistryData"]}},methods:{paginate:function(t){var e=t.data;this.$store.commit("setRegistryData",{data:e})}}},ke=ye,xe=Object(d["a"])(ke,_e,me,!1,null,null,null),Ne=xe.exports,$e={name:"Certificates",components:{Filters:de,CertificatesList:Ne},beforeMount:function(){this.$store.dispatch("fetchRegistryData")},methods:{toMain:function(){this.$router.push({name:"Home"})}},computed:{hallName:function(){return this.$store.getters["getRegistryName"]},totalCertificates:function(){return this.$store.getters["getTotalCertificates"]},totalVisits:function(){return this.$store.getters["getTotalVisits"]}}},Te=$e,Oe=Object(d["a"])(Te,ne,re,!1,null,null,null),Se=Oe.exports;a["default"].use(X["a"]);var Ee=[{path:"/admin/arm/",name:"Home",component:Vt,meta:{middleware:[_t,dt,ft]}},{path:"/admin/arm/certificates",name:"Certificates",component:Se,meta:{middleware:[dt,_t,ft]}},{path:"/admin/arm/auth",name:"Auth",component:ie,meta:{middleware:[ft,dt,_t]}},{path:"*",redirect:"/admin/arm/"}],De=new X["a"]({mode:"history",base:"/",routes:Ee});De.beforeEach((function(t,e,s){if(!t.meta.middleware)return s();var i=t.meta.middleware,n=a["default"],r={to:t,from:e,next:s,store:ut,app:n};return i[0](Object(U["a"])(Object(U["a"])({},r),{},{next:pt(r,i,1)}))}));var Pe=De,Ie=(s("b72f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{class:t.className,attrs:{width:t.width,height:t.height}},[s("use",{attrs:{"xlink:href":"img/sprite.svg#"+t.name}})])}),Le=[],qe={props:{className:{type:String,default:""},name:{type:String,default:""},width:{type:[String,Number],default:"24"},height:{type:[String,Number],default:"24"}}},Ae=qe,Re=Object(d["a"])(Ae,Ie,Le,!1,null,null,null),ze=Re.exports,Be=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"guest__timer"},[t._v(" "+t._s(t.timeLeftString)+" ")])},He=[],Fe={props:{timer:{type:Boolean,default:!0},timeTo:{type:String,default:""},timeLeftString:{type:String,default:"00:00:00"}}},Me=Fe,Ge=Object(d["a"])(Me,Be,He,!1,null,null,null),Ve=Ge.exports,Qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("details",{staticClass:"guest",class:{"guest--soon":t.isSoonOver||"expired"===t.data.status},on:{toggle:t.changeGuest}},[s("summary",[s("span",{staticClass:"guest__queue-number"},[t._v(t._s(t.data.queue))]),s("span",{staticClass:"guest__table"},[t._v(t._s(t.data.table_number?t.data.table_number:t.localTable))]),s("span",{staticClass:"guest__guests"},[t._v(t._s(t.data.pass_limit))]),s("Timer",{class:{"guest__timer--over-soon":t.isSoonOver||"expired"===t.data.status},attrs:{"time-to":t.data.start_time,"time-left-string":t.timeLeftString}})],1),s("div",{staticClass:"guest__wrapper"},[t.data.table?s("p",{staticClass:"guest__queue-number guest__queue-number--inside"},[t._v(" №гостя: "),s("span",{staticClass:"guest__order"},[t._v(t._s(t.data.table))])]):t._e(),t.data.bank?s("p",{staticClass:"guest__bank"},[t._v("Оплачено с помощью Тинькофф")]):t._e()]),s("div",{staticClass:"guest__wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localTable,expression:"localTable"}],staticClass:"guest__input guest__input--table",attrs:{type:"text",name:"table",placeholder:"№ столика"},domProps:{value:t.localTable},on:{input:function(e){e.target.composing||(t.localTable=e.target.value)}}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"guest__input",attrs:{name:"description",cols:"30",rows:"2",placeholder:"Здесь вы можете указать комментарии для идентификации гостя"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),s("div",{staticClass:"guest__wrapper"},[s("button",{staticClass:"button guest__cancel-button",on:{click:t.removeCertificate}},[t._v(" Завершить пребывание ")]),s("TimerToggler",{attrs:{toggleTimer:t.toggleTimer,timer:t.timer,"is-guest":!0}})],1)])},Ue=[],Xe={components:{TimerToggler:Et},props:{data:{type:Object,default:function(){return{}}}},data:function(){return{description:"",timeLeftString:"",intervalId:null,isSoonOver:!1,timer:!0,localTable:""}},mounted:function(){this.data.description&&(this.description=this.data.description),this.data.table&&(this.localTable=this.data.table),this.isActive&&(this.intervalId=setInterval(this.timeLeft,1e3),this.timeLeft())},beforeDestroy:function(){this.intervalId&&clearInterval(this.intervalId,1e3)},computed:{isActive:function(){return"active"===this.data.status}},methods:{timeLeft:function(){var t=this.timeDiff(),e=3e5;this.isSoonOver=t<e,this.timeLeftString=t>0?t.format("HH:mm:ss"):"00:00:00",t<0&&this.isActive&&(this.sendExpired(),clearInterval(this.intervalId,1e3))},timeDiff:function(){var t=this.$moment(),e=this.$moment.tz(this.data.start_time,t.format("z")).add(3,"hours");return this.$moment(e.diff(t))},sendExpired:function(){this.$store.dispatch("sendExpiredCertificate",{id:this.data.id})},removeCertificate:function(){var t=this;return this.$store.dispatch("removeCertificate",{id:this.data.id}).then((function(){clearInterval(t.intervalId,1e3)}))},toggleTimer:function(){var t=this;this.timer=!1,this.removeCertificate().then((function(){}),(function(){t.timer=!0}))},changeGuest:function(t){var e=this;t.target.open||this.$axios.post("/certificates-edit",{description:this.description,table_number:this.localTable,id:this.data.id}).catch((function(t){console.warn(t),e.description="",e.localTable=""}))}}},Je=Xe,Ke=Object(d["a"])(Je,Qe,Ue,!1,null,null,null),We=Ke.exports,Ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"note",staticClass:"note",class:{"note--removed-left":"left"===t.isRemoved,"note--removed-right":"right"===t.isRemoved}},[t.isBank?t._e():s("div",{staticClass:"note__wrapper"},[s("h4",{staticClass:"note__title"},[s("SvgIcon",{attrs:{name:"info","class-name":"note__message-icon",width:"16",height:"16"}}),t._v("Заканчивается время пребывания в Бизнес-зале "),s("span",{staticClass:"note__time-left"},[t._v("Осталось: 5 мин")])],1),t._m(0)]),t.isBank?s("div",{staticClass:"note__wrapper note__wrapper--bank"},[t._m(1),t._m(2)]):t._e()])},Ze=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"note__text"},[t._v(" Гость №56 Березовский Дмитрий Анатольевич "),s("span",{staticClass:"note__info"},[t._v("Столик №1; Мужчина в черном пальто и шляпе")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"note__img-wrapper"},[s("img",{attrs:{src:"img/bank-logo.png",alt:"",width:"32",height:"32"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h4",{staticClass:"note__title"},[s("span",[t._v("Тинькофф банк ")]),s("span",{staticClass:"note__message"},[t._v("Ошибка оплаты.")]),s("span",{staticClass:"note__info"},[t._v("Столик №1; Мужчина в черном пальто и шляпе")])])}],ts={props:{note:{type:Object,default:function(){return{type:"end"}}}},data:function(){return{xBase:0,currentStart:0,currentDiff:0,xDiff:0,isRemoved:!1}},mounted:function(){this.xBase=this.$refs.note.getBoundingClientRect().x,this.$refs.note.addEventListener("touchstart",this.handleStartTouch),this.$refs.note.addEventListener("touchend",this.handleStopTouch)},computed:{isBank:function(){return"bank"===this.note.type}},methods:{removeNewNote:function(t){var e=this;this.isRemoved=t?"right":"left",setTimeout((function(){e.$store.commit("removeNewNote",{note:e.note})}),100)},handleStopTouch:function(){this.$refs.note.removeEventListener("touchmove",this.handleTouch),this.isRemoved||(this.$refs.note.style.transform="translateX(0)")},handleTouch:function(t){var e=t.target.closest(".note"),s=e.offsetWidth/2;this.currentStart=t.touches[0].clientX-this.curretnDiff;var a=this.currentStart-this.xBase>s,i=-(this.currentStart-this.xBase)>s;if(a||i)return this.removeNewNote(a),void(e.style.transform="translateX(".concat(this.currentStart-this.xBase>0?s:-s,"px)"));e.style.transform="translateX(".concat(this.currentStart-this.xBase,"px)")},handleStartTouch:function(t){this.$refs.note.addEventListener("touchmove",this.handleTouch),this.currentStart=t.touches[0].clientX,this.curretnDiff=this.currentStart-this.xBase}}},es=ts,ss=Object(d["a"])(es,Ye,Ze,!1,null,null,null),as=ss.exports,is=s("7f45"),ns=s.n(is),rs=s("404b"),cs=s.n(rs),os=s("9ce7"),ls=s.n(os),us=s("782e"),fs=s.n(us);window.Pusher=fs.a,a["default"].use(ls.a,{broadcaster:"pusher",key:"1f81edf1fa54a7692267",cluster:"eu",forceTLS:!0,authEndpoint:"https://golden-key.wn.staj.fun/broadcasting/auth",auth:{headers:{Authorization:ut.getters["token"],"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"}}}),Z.a.defaults.withCredentials=!0,Z.a.defaults.baseURL="https://golden-key.wn.staj.fun/api",Z.a.defaults.headers.common["Access-Control-Allow-Origin"]="*",Z.a.defaults.headers.common["Access-Control-Allow-Credentials"]="true",Z.a.defaults.headers.common["authorization"]=ut.getters["token"],a["default"].prototype.$axios=Z.a,a["default"].prototype.$eventBus=new a["default"],a["default"].prototype.$moment=ns.a,a["default"].prototype.$moment.tz.setDefault("Etc/GMT+0"),a["default"].component("SvgIcon",ze),a["default"].component("TimerToggler",Et),a["default"].component("Timer",Ve),a["default"].component("Guest",We),a["default"].component("Note",as),a["default"].component("DatePicker",cs.a),new a["default"]({router:Pe,store:ut,render:function(t){return t(Q)}}).$mount("#app")},"975c":function(t,e,s){},b350:function(t,e,s){"use strict";s("975c")},b72f:function(t,e,s){}});
//# sourceMappingURL=app.262d01d8.js.map